# 功能测试清单 ✅

## 准备工作
- [ ] 停止之前运行的服务 (Ctrl+C)
- [ ] 重新安装依赖: `pip install -r requirements.txt`
- [ ] 确认 `.env` 文件配置正确
- [ ] 启动服务: `python app.py`
- [ ] 确认看到提示: "✅ API Key: 已配置"

## 1. 用户注册测试 📝

### 测试用例 1.1: 成功注册
- [ ] 访问 http://localhost:5000
- [ ] 自动跳转到登录页
- [ ] 点击"立即注册"链接
- [ ] 输入用户名: `testuser`
- [ ] 输入邮箱: `test@example.com` (可选)
- [ ] 输入密码: `123456`
- [ ] 确认密码: `123456`
- [ ] 点击"注册"按钮
- [ ] **预期**: 显示"注册成功!"并跳转到登录页

### 测试用例 1.2: 注册验证
- [ ] 尝试注册用户名少于3个字符
- [ ] **预期**: 显示错误 "用户名至少3个字符"
- [ ] 尝试注册密码少于6个字符
- [ ] **预期**: 显示错误 "密码至少6个字符"
- [ ] 两次密码输入不一致
- [ ] **预期**: 显示错误 "两次输入的密码不一致"

### 测试用例 1.3: 重复注册
- [ ] 使用已存在的用户名注册
- [ ] **预期**: 显示错误 "用户名已存在"

## 2. 用户登录测试 🔐

### 测试用例 2.1: 成功登录
- [ ] 在登录页输入用户名: `testuser`
- [ ] 输入密码: `123456`
- [ ] 点击"登录"按钮
- [ ] **预期**: 显示"登录成功!"并跳转到聊天页面

### 测试用例 2.2: 登录失败
- [ ] 输入错误的用户名
- [ ] **预期**: 显示 "用户名或密码错误"
- [ ] 输入正确用户名但错误密码
- [ ] **预期**: 显示 "用户名或密码错误"

### 测试用例 2.3: 登录状态检查
- [ ] 登录成功后,左下角显示用户名 `testuser`
- [ ] 刷新页面,仍保持登录状态
- [ ] 关闭浏览器重新打开,仍保持登录状态(7天内)

## 3. 主题切换测试 🎨

### 测试用例 3.1: 打开设置页面
- [ ] 点击右上角设置图标(齿轮)
- [ ] **预期**: 弹出设置模态框
- [ ] 模态框显示5种主题选项
- [ ] 当前主题(深色)显示选中状态(√)

### 测试用例 3.2: 切换到浅色主题
- [ ] 点击"浅色"主题选项
- [ ] **预期**: 界面立即切换为浅色
- [ ] 背景变白,文字变黑
- [ ] 浅色主题显示选中状态

### 测试用例 3.3: 切换到蓝色主题
- [ ] 点击"蓝色"主题选项
- [ ] **预期**: 界面变为蓝色调
- [ ] 主要按钮和高亮颜色变蓝

### 测试用例 3.4: 切换到绿色主题
- [ ] 点击"绿色"主题选项
- [ ] **预期**: 界面变为绿色调
- [ ] 主要按钮和高亮颜色变绿

### 测试用例 3.5: 切换到紫色主题
- [ ] 点击"紫色"主题选项
- [ ] **预期**: 界面变为紫色调
- [ ] 主要按钮和高亮颜色变紫

### 测试用例 3.6: 主题持久化
- [ ] 切换到任意主题(如蓝色)
- [ ] 关闭设置模态框
- [ ] 刷新页面
- [ ] **预期**: 主题保持为蓝色
- [ ] 退出登录
- [ ] 重新登录
- [ ] **预期**: 主题仍为蓝色

### 测试用例 3.7: 关闭设置模态框
- [ ] 点击右上角 X 按钮
- [ ] **预期**: 模态框关闭
- [ ] 点击模态框外的背景
- [ ] **预期**: 模态框关闭

## 4. 对话功能测试 💬

### 测试用例 4.1: 发送消息
- [ ] 在输入框输入: "你好,介绍一下你自己"
- [ ] 点击发送按钮
- [ ] **预期**: 
  - 用户消息显示,用户名为 `testuser`
  - 助手消息流式返回
  - 消息正常显示

### 测试用例 4.2: 切换模型
- [ ] 点击顶部模型选择器
- [ ] 选择 `deepseek-coder`
- [ ] 发送消息: "写一个Python快速排序"
- [ ] **预期**: 使用 deepseek-coder 模型回复

### 测试用例 4.3: 新建对话
- [ ] 点击左上角"新对话"按钮
- [ ] **预期**: 
  - 消息区域清空
  - 显示欢迎屏幕
  - 可以发送新消息

### 测试用例 4.4: 对话列表
- [ ] 发送几条消息
- [ ] 查看左侧对话列表
- [ ] **预期**: 
  - 显示对话标题(第一条消息前50字)
  - 显示更新时间
  - 最新对话在顶部

### 测试用例 4.5: 切换对话
- [ ] 创建2-3个不同对话
- [ ] 点击对话列表中的对话
- [ ] **预期**: 
  - 加载该对话的历史消息
  - 消息正常显示

### 测试用例 4.6: 删除对话
- [ ] 鼠标悬停在对话项上
- [ ] 点击出现的删除图标
- [ ] 确认删除
- [ ] **预期**: 
  - 对话从列表中移除
  - 如果是当前对话,清空消息区域

### 测试用例 4.7: 清空对话
- [ ] 在对话中发送几条消息
- [ ] 点击右上角清空图标
- [ ] 确认清空
- [ ] **预期**: 当前对话被清空

## 5. 用户信息显示测试 👤

### 测试用例 5.1: 用户名显示
- [ ] 查看左下角
- [ ] **预期**: 显示当前登录用户名 `testuser`

### 测试用例 5.2: 消息中用户名
- [ ] 发送一条消息
- [ ] **预期**: 
  - 用户消息头部显示 `testuser` 而不是 "你"
  - 用户头像显示

### 测试用例 5.3: 退出按钮
- [ ] 鼠标悬停在左下角用户信息上
- [ ] **预期**: 显示退出图标
- [ ] 鼠标移开
- [ ] **预期**: 退出图标隐藏

## 6. 登出测试 🚪

### 测试用例 6.1: 正常登出
- [ ] 鼠标悬停在左下角用户信息上
- [ ] 点击退出图标
- [ ] 确认退出
- [ ] **预期**: 
  - 跳转到登录页
  - 无法直接访问聊天页面

### 测试用例 6.2: 取消登出
- [ ] 点击退出图标
- [ ] 点击"取消"
- [ ] **预期**: 保持在聊天页面

## 7. 多用户隔离测试 🔒

### 测试用例 7.1: 创建第二个用户
- [ ] 登出当前用户
- [ ] 注册新用户: `testuser2` / `123456`
- [ ] 登录 `testuser2`
- [ ] **预期**: 对话列表为空

### 测试用例 7.2: 用户对话隔离
- [ ] 用 `testuser2` 发送几条消息
- [ ] 登出
- [ ] 登录 `testuser` (第一个用户)
- [ ] **预期**: 
  - 只能看到 `testuser` 的对话
  - 看不到 `testuser2` 的对话

### 测试用例 7.3: 主题设置隔离
- [ ] 用 `testuser` 设置蓝色主题
- [ ] 登出
- [ ] 登录 `testuser2`
- [ ] **预期**: `testuser2` 的主题仍为深色(默认)

## 8. 错误处理测试 🐛

### 测试用例 8.1: 网络错误
- [ ] 停止后端服务
- [ ] 尝试发送消息
- [ ] **预期**: 显示错误提示

### 测试用例 8.2: API Key 错误
- [ ] 在 `.env` 中设置错误的 API Key
- [ ] 重启服务
- [ ] 尝试发送消息
- [ ] **预期**: 显示 API 错误提示

### 测试用例 8.3: 未登录访问
- [ ] 清除浏览器 Cookie
- [ ] 直接访问 http://localhost:5000
- [ ] **预期**: 自动跳转到登录页

## 9. 响应式测试 📱

### 测试用例 9.1: 移动端视图
- [ ] 将浏览器窗口缩小到手机宽度
- [ ] **预期**: 
  - 侧边栏隐藏
  - 显示菜单按钮
  - 布局自适应

### 测试用例 9.2: 侧边栏切换
- [ ] 在移动端视图点击菜单按钮
- [ ] **预期**: 侧边栏滑出
- [ ] 点击背景
- [ ] **预期**: 侧边栏隐藏

## 10. 界面交互测试 ✨

### 测试用例 10.1: 示例提示词
- [ ] 在欢迎屏幕点击示例提示词
- [ ] **预期**: 
  - 输入框自动填充提示词
  - 发送按钮启用

### 测试用例 10.2: 输入框自动调整
- [ ] 在输入框输入多行文字
- [ ] **预期**: 输入框高度自动增长
- [ ] 删除文字
- [ ] **预期**: 输入框高度缩小

### 测试用例 10.3: 快捷键
- [ ] 输入消息后按 Enter
- [ ] **预期**: 发送消息
- [ ] 按 Shift+Enter
- [ ] **预期**: 换行

### 测试用例 10.4: 滚动行为
- [ ] 发送多条消息
- [ ] **预期**: 
  - 自动滚动到最新消息
  - 消息带淡入动画

## 📊 测试结果汇总

| 功能模块 | 通过 | 失败 | 备注 |
|---------|------|------|------|
| 用户注册 | __ / 3 | __ | |
| 用户登录 | __ / 3 | __ | |
| 主题切换 | __ / 7 | __ | |
| 对话功能 | __ / 7 | __ | |
| 用户信息 | __ / 3 | __ | |
| 登出功能 | __ / 2 | __ | |
| 多用户隔离 | __ / 3 | __ | |
| 错误处理 | __ / 3 | __ | |
| 响应式 | __ / 2 | __ | |
| 界面交互 | __ / 4 | __ | |
| **总计** | __ / 37 | __ | |

## 🎯 测试建议

1. **按顺序测试**: 先测试注册登录,再测试其他功能
2. **多用户测试**: 创建2-3个测试账户进行隔离性测试
3. **清除缓存**: 某些测试需要清除浏览器缓存/Cookie
4. **记录问题**: 发现问题及时记录错误信息

## ⚠️ 已知限制

- 数据存储在内存中,重启服务会丢失所有数据
- 没有邮箱验证功能
- 没有密码找回功能
- 生产环境需要使用数据库

---

**测试完成后请在上方表格中填写结果! ✅**
