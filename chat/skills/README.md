# Skills æ¨¡å—

AI å¯¹è¯å¹³å°çš„æŠ€èƒ½ç³»ç»Ÿï¼Œè®© AI èƒ½å¤Ÿè°ƒç”¨é¢„å®šä¹‰çš„åŠŸèƒ½æ¥å¢å¼ºå¯¹è¯èƒ½åŠ›ã€‚

## ğŸ“š æ¦‚è¿°

Skills ç³»ç»ŸåŸºäº **OpenAI Function Calling** æœºåˆ¶ï¼Œå…è®¸ AI åœ¨å¯¹è¯è¿‡ç¨‹ä¸­è‡ªä¸»å†³å®šä½•æ—¶è°ƒç”¨å“ªä¸ªæŠ€èƒ½æ¥è·å–ä¿¡æ¯æˆ–æ‰§è¡Œæ“ä½œã€‚

### ç‰¹ç‚¹

- ğŸ¯ **è‡ªåŠ¨å‘ç°**: è‡ªåŠ¨æ‰«æå¹¶åŠ è½½æ‰€æœ‰æŠ€èƒ½æ–‡ä»¶å¤¹
- ğŸ“ **æ ‡å‡†åŒ–ç»“æ„**: æ¯ä¸ªæŠ€èƒ½ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒåŒ…å«æ–‡æ¡£å’Œä»£ç 
- ğŸ”Œ **å³æ’å³ç”¨**: æ·»åŠ æ–°æŠ€èƒ½æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
- ğŸ“– **æ–‡æ¡£é©±åŠ¨**: æ¯ä¸ªæŠ€èƒ½å¿…é¡»åŒ…å«è¯¦ç»†çš„ SKILL.md æ–‡æ¡£
- ğŸ§ª **ç‹¬ç«‹æµ‹è¯•**: æ¯ä¸ªæŠ€èƒ½å¯ç‹¬ç«‹è¿è¡Œæµ‹è¯•

## ğŸ“‚ æŠ€èƒ½ç»“æ„

æ¯ä¸ªæŠ€èƒ½éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼Œéµå¾ªä»¥ä¸‹æ ‡å‡†ç»“æ„ï¼š

```
skills/
â”œâ”€â”€ README.md                # æœ¬æ–‡æ¡£ï¼ˆskills ç³»ç»Ÿæ€»è§ˆï¼‰
â”œâ”€â”€ base.py                  # åŸºç¡€ç±»å’Œæ³¨å†Œè¡¨
â”œâ”€â”€ __init__.py              # è‡ªåŠ¨åŠ è½½æ¨¡å—
â”‚
â”œâ”€â”€ get_current_date/        # æŠ€èƒ½ç¤ºä¾‹ï¼šè·å–æ—¥æœŸ
â”‚   â”œâ”€â”€ SKILL.md            # ğŸ“– æŠ€èƒ½æ–‡æ¡£ï¼ˆå¿…éœ€ï¼‰
â”‚   â”œâ”€â”€ skill.py            # ğŸ’» æŠ€èƒ½å®ç°ï¼ˆå¿…éœ€ï¼‰
â”‚   â””â”€â”€ ...                 # å…¶ä»–èµ„æºï¼ˆå¯é€‰ï¼‰
â”‚
â”œâ”€â”€ your_skill_name/         # ä½ çš„è‡ªå®šä¹‰æŠ€èƒ½
â”‚   â”œâ”€â”€ SKILL.md            # ğŸ“– æŠ€èƒ½æ–‡æ¡£
â”‚   â”œâ”€â”€ skill.py            # ğŸ’» æŠ€èƒ½å®ç°
â”‚   â”œâ”€â”€ utils.py            # è¾…åŠ©å·¥å…·ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ config.json         # é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ data/               # æ•°æ®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚
â””â”€â”€ ...
```

### å¿…éœ€æ–‡ä»¶

#### 1. SKILL.md

æŠ€èƒ½çš„å®Œæ•´æ–‡æ¡£ï¼Œåº”åŒ…å«ï¼š

- **åŠŸèƒ½æè¿°**: æŠ€èƒ½çš„ä½œç”¨å’Œç›®çš„
- **ä½¿ç”¨åœºæ™¯**: ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½
- **å‚æ•°è¯´æ˜**: æ‰€æœ‰å‚æ•°çš„è¯¦ç»†è¯´æ˜
- **è¿”å›å€¼**: è¿”å›æ•°æ®çš„ç»“æ„å’Œè¯´æ˜
- **ä½¿ç”¨ç¤ºä¾‹**: çœŸå®çš„è°ƒç”¨ç¤ºä¾‹å’Œå¯¹è¯ç¤ºä¾‹
- **æŠ€æœ¯å®ç°**: å®ç°ç»†èŠ‚ã€ä¾èµ–ç­‰
- **é”™è¯¯å¤„ç†**: å¯èƒ½çš„é”™è¯¯æƒ…å†µ
- **ç‰ˆæœ¬å†å²**: æ›´æ–°è®°å½•

å‚è€ƒ `get_current_date/SKILL.md` æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ã€‚

#### 2. skill.py

æŠ€èƒ½çš„å®ç°ä»£ç ï¼Œå¿…é¡»ï¼š

- å¯¼å…¥ `BaseSkill` ç±»
- åˆ›å»ºç»§æ‰¿ `BaseSkill` çš„å­ç±»
- å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼š
  - `get_name()`: è¿”å›æŠ€èƒ½åç§°ï¼ˆå‡½æ•°åï¼‰
  - `get_description()`: è¿”å›ç®€çŸ­æè¿°
  - `get_parameters()`: è¿”å› JSON Schema æ ¼å¼çš„å‚æ•°å®šä¹‰
  - `execute(**kwargs)`: æ‰§è¡ŒæŠ€èƒ½é€»è¾‘

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ç°æœ‰æŠ€èƒ½

```python
from skills import register_all_skills

# è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œæ‰€æœ‰æŠ€èƒ½
registry = register_all_skills()

# åˆ—å‡ºæ‰€æœ‰æŠ€èƒ½
print(registry.list_skills())

# è·å–æŠ€èƒ½
skill = registry.get_skill("get_current_date")

# æ‰§è¡ŒæŠ€èƒ½
result = skill.execute(format="full")
print(result)
```

### åˆ›å»ºæ–°æŠ€èƒ½

#### æ­¥éª¤ 1: åˆ›å»ºæŠ€èƒ½æ–‡ä»¶å¤¹

```bash
cd skills
mkdir my_new_skill
cd my_new_skill
```

#### æ­¥éª¤ 2: åˆ›å»º skill.py

```python
"""
æˆ‘çš„æ–°æŠ€èƒ½ - ç®€çŸ­æè¿°
"""

import sys
import os
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from base import BaseSkill
from typing import Dict, Any


class MyNewSkill(BaseSkill):
    """æˆ‘çš„æ–°æŠ€èƒ½ç±»"""
    
    def get_name(self) -> str:
        return "my_new_skill"
    
    def get_description(self) -> str:
        return "è¿™ä¸ªæŠ€èƒ½å¯ä»¥åšä»€ä¹ˆçš„ç®€çŸ­è¯´æ˜"
    
    def get_parameters(self) -> Dict[str, Any]:
        return {
            "type": "object",
            "properties": {
                "param1": {
                    "type": "string",
                    "description": "å‚æ•°1çš„è¯´æ˜"
                },
                "param2": {
                    "type": "integer",
                    "description": "å‚æ•°2çš„è¯´æ˜",
                    "default": 10
                }
            },
            "required": ["param1"]
        }
    
    def execute(self, param1: str, param2: int = 10, **kwargs) -> Dict[str, Any]:
        """
        æ‰§è¡ŒæŠ€èƒ½
        
        Args:
            param1: å‚æ•°1
            param2: å‚æ•°2ï¼ˆé»˜è®¤10ï¼‰
            
        Returns:
            Dict[str, Any]: æ‰§è¡Œç»“æœ
        """
        try:
            # ä½ çš„æŠ€èƒ½é€»è¾‘
            result = {
                "success": True,
                "data": f"å¤„ç†äº† {param1}ï¼Œä½¿ç”¨å‚æ•° {param2}"
            }
            return result
            
        except Exception as e:
            return {
                "error": f"æ‰§è¡Œå¤±è´¥: {str(e)}"
            }


# ç‹¬ç«‹æµ‹è¯•
if __name__ == "__main__":
    skill = MyNewSkill()
    print(f"æŠ€èƒ½åç§°: {skill.name}")
    print(f"æµ‹è¯•æ‰§è¡Œ:")
    print(skill.execute(param1="test"))
```

#### æ­¥éª¤ 3: åˆ›å»º SKILL.md

```markdown
# My New Skill

ç®€çŸ­çš„ä¸€å¥è¯æè¿°ã€‚

## åŠŸèƒ½æè¿°

è¯¦ç»†è¯´æ˜è¿™ä¸ªæŠ€èƒ½çš„åŠŸèƒ½...

## ä½¿ç”¨åœºæ™¯

- åœºæ™¯1
- åœºæ™¯2

## å‚æ•°è¯´æ˜

### param1 (å¿…éœ€)
- **ç±»å‹**: string
- **æè¿°**: å‚æ•°è¯´æ˜

### param2 (å¯é€‰)
- **ç±»å‹**: integer
- **é»˜è®¤å€¼**: 10
- **æè¿°**: å‚æ•°è¯´æ˜

## è¿”å›å€¼

```json
{
  "success": true,
  "data": "..."
}
```

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1

**ç”¨æˆ·**: ç¤ºä¾‹é—®é¢˜

**AI è°ƒç”¨**:
```json
{
  "function": "my_new_skill",
  "arguments": {
    "param1": "value1"
  }
}
```

**è¿”å›**:
```json
{
  "success": true,
  "data": "ç»“æœ"
}
```

**AI å›å¤**: AI æ ¹æ®è¿”å›å€¼çš„å›ç­”

## æŠ€æœ¯å®ç°

- å®ç°ç»†èŠ‚
- ä¾èµ–è¯´æ˜

## é”™è¯¯å¤„ç†

å¯èƒ½çš„é”™è¯¯...

## ç‰ˆæœ¬å†å²

- v1.0: åˆå§‹ç‰ˆæœ¬
```

#### æ­¥éª¤ 4: æµ‹è¯•æŠ€èƒ½

```bash
# ç‹¬ç«‹æµ‹è¯•
python my_new_skill/skill.py

# æˆ–ä½¿ç”¨æµ‹è¯•è„šæœ¬
cd ../..
python test_skills.py
```

#### æ­¥éª¤ 5: é‡å¯æœåŠ¡

æŠ€èƒ½ä¼šè¢«è‡ªåŠ¨å‘ç°å’ŒåŠ è½½ï¼š

```bash
python app.py
```

è¾“å‡ºä¼šæ˜¾ç¤ºï¼š

```
ğŸ” å‘ç° 2 ä¸ªæŠ€èƒ½:
   ğŸ“ get_current_date
   ğŸ“ my_new_skill

ğŸ“¥ å¼€å§‹åŠ è½½æŠ€èƒ½...
   âœ… get_current_date
   âœ… my_new_skill

âœ… æŠ€èƒ½åŠ è½½å®Œæˆï¼å…±æ³¨å†Œ 2 ä¸ªæŠ€èƒ½
```

## ğŸ¯ æŠ€èƒ½å¼€å‘æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

- **æ–‡ä»¶å¤¹å**: å°å†™å­—æ¯+ä¸‹åˆ’çº¿ï¼Œæè¿°æ€§å¼º
  - âœ… `get_current_date`
  - âœ… `calculate_math`
  - âŒ `date`ï¼ˆå¤ªæ¨¡ç³Šï¼‰
  - âŒ `GetDate`ï¼ˆä¸è¦ç”¨é©¼å³°ï¼‰

- **å‡½æ•°å** (`get_name()`): ä¸æ–‡ä»¶å¤¹åä¸€è‡´
  - âœ… `get_current_date`
  - âŒ `getCurrentDate`

- **ç±»å**: é©¼å³°å‘½åæ³•ï¼Œä»¥ Skill ç»“å°¾
  - âœ… `DateSkill`
  - âœ… `CalculateMathSkill`

### 2. æè¿°è§„èŒƒ

- **ç®€çŸ­æè¿°** (`get_description()`): 
  - ä¸€å¥è¯è¯´æ¸…æ¥šæŠ€èƒ½ç”¨é€”
  - è¯´æ˜ä½•æ—¶è°ƒç”¨æ­¤æŠ€èƒ½
  - 50-150 å­—ä¸ºå®œ

- **SKILL.md**:
  - è¯¦ç»†ä¸”å®Œæ•´
  - åŒ…å«å¤šä¸ªä½¿ç”¨ç¤ºä¾‹
  - è¯´æ˜è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†

### 3. å‚æ•°è®¾è®¡

- ä½¿ç”¨ JSON Schema æ ‡å‡†æ ¼å¼
- å¿…éœ€å‚æ•°å°½é‡å°‘ï¼ˆ1-2ä¸ªï¼‰
- æä¾›åˆç†çš„é»˜è®¤å€¼
- å‚æ•°åè¦æ¸…æ™°æ˜ç¡®
- ä½¿ç”¨ `enum` é™åˆ¶å¯é€‰å€¼ï¼ˆé€‚ç”¨æ—¶ï¼‰

```python
def get_parameters(self) -> Dict[str, Any]:
    return {
        "type": "object",
        "properties": {
            "query": {
                "type": "string",
                "description": "æœç´¢æŸ¥è¯¢"
            },
            "limit": {
                "type": "integer",
                "description": "è¿”å›ç»“æœæ•°é‡",
                "default": 10,
                "minimum": 1,
                "maximum": 100
            },
            "sort_by": {
                "type": "string",
                "enum": ["relevance", "date", "popularity"],
                "description": "æ’åºæ–¹å¼",
                "default": "relevance"
            }
        },
        "required": ["query"]
    }
```

### 4. è¿”å›å€¼è®¾è®¡

- å§‹ç»ˆè¿”å› `Dict[str, Any]`
- æˆåŠŸæ—¶åŒ…å«æœ‰ç”¨çš„æ•°æ®
- å¤±è´¥æ—¶è¿”å› `{"error": "é”™è¯¯ä¿¡æ¯"}`
- è€ƒè™‘ AI å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®
- åŒ…å«äººæ€§åŒ–çš„æè¿°ï¼ˆå¯é€‰ï¼‰

```python
# æˆåŠŸè¿”å›
{
    "success": True,
    "data": {...},
    "summary": "äººæ€§åŒ–çš„æ€»ç»“ï¼ˆAI å¯ç›´æ¥ä½¿ç”¨ï¼‰"
}

# é”™è¯¯è¿”å›
{
    "error": "è¯¦ç»†çš„é”™è¯¯è¯´æ˜"
}
```

### 5. é”™è¯¯å¤„ç†

- ä½¿ç”¨ try-except æ•è·æ‰€æœ‰å¼‚å¸¸
- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯
- ä¸è¦è®©å¼‚å¸¸ä¼ æ’­åˆ°ä¸Šå±‚
- è®°å½•æ—¥å¿—ï¼ˆé€‚ç”¨æ—¶ï¼‰

```python
def execute(self, **kwargs) -> Dict[str, Any]:
    try:
        # æŠ€èƒ½é€»è¾‘
        result = do_something()
        return {"success": True, "data": result}
        
    except ValueError as e:
        return {"error": f"å‚æ•°é”™è¯¯: {str(e)}"}
    except Exception as e:
        return {"error": f"æ‰§è¡Œå¤±è´¥: {str(e)}"}
```

### 6. ä¾èµ–ç®¡ç†

- åœ¨ SKILL.md ä¸­è¯´æ˜ä¾èµ–
- ä½¿ç”¨æ ‡å‡†åº“ä¼˜å…ˆ
- å¦‚éœ€ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨ `requirements.txt` ä¸­æ·»åŠ 
- è€ƒè™‘ä¾èµ–çš„å®‰è£…å’Œå…¼å®¹æ€§

### 7. æµ‹è¯•

- åœ¨ `skill.py` ä¸­æ·»åŠ  `if __name__ == "__main__"` å—
- æµ‹è¯•å„ç§å‚æ•°ç»„åˆ
- æµ‹è¯•è¾¹ç•Œæƒ…å†µ
- æµ‹è¯•é”™è¯¯å¤„ç†

```python
if __name__ == "__main__":
    skill = MySkill()
    
    # æµ‹è¯•æ­£å¸¸æƒ…å†µ
    print("æµ‹è¯• 1:", skill.execute(param1="value1"))
    
    # æµ‹è¯•è¾¹ç•Œæƒ…å†µ
    print("æµ‹è¯• 2:", skill.execute(param1=""))
    
    # æµ‹è¯•é”™è¯¯æƒ…å†µ
    print("æµ‹è¯• 3:", skill.execute())
```

## ğŸ“Š å†…ç½®æŠ€èƒ½åˆ—è¡¨

### get_current_date

è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ã€‚

- **æ–‡ä»¶å¤¹**: `get_current_date/`
- **å‡½æ•°å**: `get_current_date`
- **å‚æ•°**: 
  - `format` (å¯é€‰): è¿”å›æ ¼å¼
  - `timezone` (å¯é€‰): æ—¶åŒº
- **ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·è¯¢é—®"ä»Šå¤©å‡ å·ï¼Ÿ"ã€"ç°åœ¨å‡ ç‚¹ï¼Ÿ"ç­‰

è¯¦è§ `get_current_date/SKILL.md`

## ğŸ”§ é«˜çº§åŠŸèƒ½

### è®¿é—®æŠ€èƒ½æ–‡æ¡£

```python
# è·å–æŠ€èƒ½çš„ SKILL.md å†…å®¹
readme = registry.get_skill_readme("get_current_date")
print(readme)
```

### è·å–æŠ€èƒ½ç›®å½•

```python
# è·å–æŠ€èƒ½çš„æ–‡ä»¶å¤¹è·¯å¾„
skill_dir = registry.get_skill_dir("get_current_date")
print(skill_dir)
```

### æŠ€èƒ½èµ„æºæ–‡ä»¶

æŠ€èƒ½å¯ä»¥åŒ…å«é¢å¤–çš„èµ„æºæ–‡ä»¶ï¼š

```
my_skill/
â”œâ”€â”€ SKILL.md
â”œâ”€â”€ skill.py
â”œâ”€â”€ config.json          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ sample.csv      # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ template.txt    # æ¨¡æ¿æ–‡ä»¶
â””â”€â”€ utils.py            # è¾…åŠ©æ¨¡å—
```

åœ¨ `skill.py` ä¸­è®¿é—®ï¼š

```python
import os

class MySkill(BaseSkill):
    def __init__(self):
        super().__init__()
        # è·å–æŠ€èƒ½ç›®å½•
        self.skill_dir = os.path.dirname(os.path.abspath(__file__))
        
        # åŠ è½½é…ç½®
        config_path = os.path.join(self.skill_dir, 'config.json')
        with open(config_path) as f:
            self.config = json.load(f)
        
        # åŠ è½½æ•°æ®
        data_path = os.path.join(self.skill_dir, 'data', 'sample.csv')
        self.data = load_data(data_path)
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æŠ€èƒ½æœªè¢«å‘ç°

**åŸå› **:
- æ–‡ä»¶å¤¹åä»¥ `_` æˆ– `.` å¼€å¤´
- ç¼ºå°‘ `skill.py` æ–‡ä»¶
- æ–‡ä»¶åæ‹¼å†™é”™è¯¯ï¼ˆä¸æ˜¯ `skill.py`ï¼‰

**è§£å†³**:
- æ£€æŸ¥æ–‡ä»¶å¤¹å‘½å
- ç¡®ä¿ `skill.py` å­˜åœ¨
- æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ä¸­çš„"å‘ç°æŠ€èƒ½"éƒ¨åˆ†

### é—®é¢˜ 2: æŠ€èƒ½åŠ è½½å¤±è´¥

**åŸå› **:
- `skill.py` æœ‰è¯­æ³•é”™è¯¯
- æœªæ‰¾åˆ° `BaseSkill` çš„å­ç±»
- å¯¼å…¥æ¨¡å—å¤±è´¥

**è§£å†³**:
- ç‹¬ç«‹è¿è¡Œ `python skill.py` æµ‹è¯•
- æ£€æŸ¥ç±»æ˜¯å¦ç»§æ‰¿ `BaseSkill`
- æ£€æŸ¥å¯¼å…¥è¯­å¥

### é—®é¢˜ 3: æŠ€èƒ½æ‰§è¡Œå‡ºé”™

**åŸå› **:
- å‚æ•°å¤„ç†é”™è¯¯
- ç¼ºå°‘ä¾èµ–
- é€»è¾‘é”™è¯¯

**è§£å†³**:
- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- æ·»åŠ  try-except æ•è·å¼‚å¸¸
- ä½¿ç”¨ `if __name__ == "__main__"` ç‹¬ç«‹æµ‹è¯•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **Function Calling**: [OpenAI æ–‡æ¡£](https://platform.openai.com/docs/guides/function-calling)
- **JSON Schema**: [æ ‡å‡†æ–‡æ¡£](https://json-schema.org/)
- **ç¤ºä¾‹æŠ€èƒ½**: `get_current_date/`

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®æ–°æŠ€èƒ½ï¼è¯·ç¡®ä¿ï¼š

1. âœ… éµå¾ªæ ‡å‡†çš„æ–‡ä»¶å¤¹ç»“æ„
2. âœ… åŒ…å«å®Œæ•´çš„ SKILL.md æ–‡æ¡£
3. âœ… ä»£ç é£æ ¼ä¸€è‡´
4. âœ… é€šè¿‡ç‹¬ç«‹æµ‹è¯•
5. âœ… æ›´æ–°æœ¬ READMEï¼ˆå¦‚æœæ˜¯æ–°åŠŸèƒ½ï¼‰

## ğŸ“„ è®¸å¯è¯

MIT License

---

**å¼€å§‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæŠ€èƒ½å§ï¼** ğŸš€
